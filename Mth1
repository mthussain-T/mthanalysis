/* MTH Trading Analysis — Single-file React component (default export)

Features included:

Data-entry form with real-time timestamp on submit

Currency selection per-trade (USDT or INR)

Fields: Pair, Direction, Amount, Target, Stop Loss, Profit/Loss, Result, Notes

Live-updating charts (Equity curve, Profit by Pair, Win/Loss ratio)

Trades table with edit/delete

Global settings for default currency, starting balance, auto-save to localStorage

Smart insights and simple psychological score

Prepared for Tailwind CSS + Recharts + localStorage

Designed for binary trading (Quotex) but generic enough for other platforms


How to use:

1. Create a React app (Vite or CRA). Install dependencies: npm install react-router-dom recharts @headlessui/react (Tailwind CSS setup recommended)


2. Drop this file as src/App.jsx and update index.jsx to render <App />


3. Run: npm run dev (Vite) or npm start (CRA)


4. Deploy to Vercel/Netlify and set custom domain to mthtradinganalysis (you must own the domain)



NOTE: This is a single-file component for quick preview and iteration. For production split into components. */

import React, { useEffect, useMemo, useState } from "react"; import { LineChart, Line, XAxis, YAxis, Tooltip, CartesianGrid, ResponsiveContainer, PieChart, Pie, Cell, BarChart, Bar, Legend } from "recharts";

export default function App() { // Local storage key const LS_KEY = "mth_trades_v1"; const SETTINGS_KEY = "mth_settings_v1";

// State const [trades, setTrades] = useState([]); const [form, setForm] = useState({ pair: "EUR/USD (OTC)", direction: "BUY", amount: "", currency: "USDT", // USDT or INR target: "", stopLoss: "", profit: "", result: "", notes: "" }); const [settings, setSettings] = useState({ startingBalance: 1000, defaultCurrency: "USDT" }); const [now, setNow] = useState(new Date());

// Live clock for real-time entry useEffect(() => { const t = setInterval(() => setNow(new Date()), 1000); return () => clearInterval(t); }, []);

// Load from localStorage useEffect(() => { const raw = localStorage.getItem(LS_KEY); if (raw) setTrades(JSON.parse(raw)); const s = localStorage.getItem(SETTINGS_KEY); if (s) setSettings(JSON.parse(s)); }, []);

// Auto-save useEffect(() => { localStorage.setItem(LS_KEY, JSON.stringify(trades)); }, [trades]); useEffect(() => { localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings)); }, [settings]);

// Helpers function formatDate(dt) { const d = new Date(dt); return d.toLocaleString(); }

function addTrade(e) { e && e.preventDefault(); const id = Date.now(); const timestamp = new Date().toISOString(); const parsedAmount = parseFloat(form.amount || 0); const parsedProfit = parseFloat(form.profit || 0); const entry = { id, timestamp, pair: form.pair, direction: form.direction, amount: isNaN(parsedAmount) ? 0 : parsedAmount, currency: form.currency, target: form.target, stopLoss: form.stopLoss, profit: isNaN(parsedProfit) ? 0 : parsedProfit, result: form.result, notes: form.notes }; setTrades((t) => [entry, ...t]); setForm({ ...form, amount: "", target: "", stopLoss: "", profit: "", result: "", notes: "" }); }

function deleteTrade(id) { setTrades((t) => t.filter((x) => x.id !== id)); }

function editTrade(id) { const tr = trades.find((x) => x.id === id); if (!tr) return; setForm({ pair: tr.pair, direction: tr.direction, amount: tr.amount.toString(), currency: tr.currency, target: tr.target || "", stopLoss: tr.stopLoss || "", profit: tr.profit.toString(), result: tr.result || "", notes: tr.notes || "" }); deleteTrade(id); window.scrollTo({ top: 0, behavior: "smooth" }); }

// Analytics calculations const analytics = useMemo(() => { const totalProfitUSDT = trades.reduce((s, t) => s + (t.currency === "USDT" ? t.profit : 0), 0); const totalProfitINR = trades.reduce((s, t) => s + (t.currency === "INR" ? t.profit : 0), 0); const wins = trades.filter((t) => String(t.result).toLowerCase() === "win").length; const losses = trades.filter((t) => String(t.result).toLowerCase() === "loss").length; const winRate = trades.length ? Math.round((wins / trades.length) * 100) : 0;

// Equity curve (assuming startingBalance per currency separately)
const sorted = [...trades].sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
let runningUSDT = settings.startingBalance;
const curve = [];
for (const t of sorted) {
  if (t.currency === "USDT") runningUSDT += t.profit;
  curve.push({ time: new Date(t.timestamp).toLocaleString(), equityUSDT: runningUSDT });
}

// Profit by pair aggregated
const byPair = {};
for (const t of trades) {
  byPair[t.pair] = (byPair[t.pair] || 0) + t.profit;
}
const byPairArray = Object.keys(byPair).map((k) => ({ name: k, value: byPair[k] }));

// Hour heatmap (simple aggregated profit by hour)
const byHour = Array.from({ length: 24 }).map((_, i) => ({ hour: i, profit: 0 }));
for (const t of trades) {
  const h = new Date(t.timestamp).getHours();
  byHour[h].profit += t.profit;
}

// Simple psychological score heuristic
const avgProfit = trades.length ? trades.reduce((s, t) => s + t.profit, 0) / trades.length : 0;
const consistency = trades.length ? (Math.max(0, 50 - Math.abs(avgProfit)) + winRate) / 2 : 50;

return {
  totalProfitUSDT,
  totalProfitINR,
  wins,
  losses,
  winRate,
  curve,
  byPairArray,
  byHour,
  consistencyScore: Math.round(consistency)
};

}, [trades, settings.startingBalance]);

// Tiny components: SmallStat function SmallStat({ title, value }) { return ( <div className="p-3 bg-white/80 dark:bg-slate-800 shadow rounded"> <div className="text-sm text-slate-500">{title}</div> <div className="text-xl font-semibold">{value}</div> </div> ); }

// Color palette for pie const COLORS = ["#4f46e5", "#06b6d4", "#10b981", "#f59e0b", "#ef4444"];

return ( <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 text-slate-900 dark:text-slate-100 p-6"> <div className="max-w-6xl mx-auto"> <header className="flex items-center justify-between mb-6"> <div> <h1 className="text-2xl font-bold">MTH Trading Analysis</h1> <p className="text-sm text-slate-500">Quotex / Binary trading dashboard — live data entry & analytics</p> </div> <div className="space-x-2 flex items-center"> <div className="text-sm text-slate-500">Now: {now.toLocaleString()}</div> <button className="px-3 py-1 rounded bg-indigo-600 text-white text-sm" onClick={() => { localStorage.removeItem(LS_KEY); setTrades([]); }} > Clear Data </button> </div> </header>

{/* Form + quick stats */}
    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
      <div className="col-span-1 md:col-span-2 bg-white/80 dark:bg-slate-800 p-4 rounded shadow">
        <form onSubmit={addTrade} className="space-y-3">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-2">
            <label className="flex flex-col">
              <span className="text-xs text-slate-500">Pair</span>
              <input value={form.pair} onChange={(e) => setForm({ ...form, pair: e.target.value })} className="mt-1 p-2 rounded bg-white/60" />
            </label>

            <label className="flex flex-col">
              <span className="text-xs text-slate-500">Direction</span>
              <select value={form.direction} onChange={(e) => setForm({ ...form, direction: e.target.value })} className="mt-1 p-2 rounded bg-white/60">
                <option>BUY</option>
                <option>SELL</option>
              </select>
            </label>

            <label className="flex flex-col">
              <span className="text-xs text-slate-500">Currency</span>
              <select value={form.currency} onChange={(e) => setForm({ ...form, currency: e.target.value })} className="mt-1 p-2 rounded bg-white/60">
                <option>USDT</option>
                <option>INR</option>
              </select>
            </label>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-4 gap-2">
            <label className="flex flex-col">
              <span className="text-xs text-slate-500">Amount ({form.currency})</span>
              <input value={form.amount} onChange={(e) => setForm({ ...form, amount: e.target.value })} className="mt-1 p-2 rounded bg-white/60" />
            </label>

            <label className="flex flex-col">
              <span className="text-xs text-slate-500">Target ({form.currency})</span>
              <input value={form.target} onChange={(e) => setForm({ ...form, target: e.target.value })} className="mt-1 p-2 rounded bg-white/60" />
            </label>

            <label className="flex flex-col">
              <span className="text-xs text-slate-500">Stop Loss ({form.currency})</span>
              <input value={form.stopLoss} onChange={(e) => setForm({ ...form, stopLoss: e.target.value })} className="mt-1 p-2 rounded bg-white/60" />
            </label>

            <label className="flex flex-col">
              <span className="text-xs text-slate-500">Profit / Loss ({form.currency})</span>
              <input value={form.profit} onChange={(e) => setForm({ ...form, profit: e.target.value })} className="mt-1 p-2 rounded bg-white/60" />
            </label>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-2">
            <label className="flex flex-col">
              <span className="text-xs text-slate-500">Result</span>
              <select value={form.result} onChange={(e) => setForm({ ...form, result: e.target.value })} className="mt-1 p-2 rounded bg-white/60">
                <option value="">(select)</option>
                <option value="Win">Win</option>
                <option value="Loss">Loss</option>
              </select>
            </label>

            <label className="flex flex-col md:col-span-2">
              <span className="text-xs text-slate-500">Notes</span>
              <input value={form.notes} onChange={(e) => setForm({ ...form, notes: e.target.value })} className="mt-1 p-2 rounded bg-white/60" />
            </label>
          </div>

          <div className="flex items-center justify-between">
            <div className="text-xs text-slate-500">Entry timestamp will be set to current time when you add the trade.</div>
            <div className="space-x-2">
              <button type="submit" className="px-4 py-2 rounded bg-green-600 text-white">Add Trade (Now)</button>
            </div>
          </div>
        </form>
      </div>

      <div className="space-y-3">
        <SmallStat title={`Total Trades`} value={trades.length} />
        <SmallStat title={`Win Rate`} value={`${analytics.winRate}% (${analytics.wins}/${trades.length})`} />
        <SmallStat title={`Consistency`} value={`${analytics.consistencyScore}%`} />
      </div>
    </div>

    {/* Charts */}
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6">
      <div className="col-span-2 bg-white/80 dark:bg-slate-800 p-4 rounded shadow">
        <h3 className="font-semibold mb-2">Equity Curve (USDT — running)</h3>
        <div style={{ width: "100%", height: 240 }}>
          <ResponsiveContainer>
            <LineChart data={analytics.curve}>
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey="time" hide />
              <YAxis />
              <Tooltip />
              <Line type="monotone" dataKey="equityUSDT" stroke="#4f46e5" strokeWidth={2} dot={false} />
            </LineChart>
          </ResponsiveContainer>
        </div>
      </div>

      <div className="bg-white/80 dark:bg-slate-800 p-4 rounded shadow">
        <h3 className="font-semibold mb-2">Profit by Pair</h3>
        <div style={{ width: "100%", height: 240 }}>
          <ResponsiveContainer>
            <PieChart>
              <Pie data={analytics.byPairArray} dataKey="value" nameKey="name" outerRadius={80} label>
                {analytics.byPairArray.map((entry, index) => (
                  <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                ))}
              </Pie>
              <Tooltip />
            </PieChart>
          </ResponsiveContainer>
        </div>
      </div>
    </div>

    <div className="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6">
      <div className="bg-white/80 dark:bg-slate-800 p-4 rounded shadow">
        <h3 className="font-semibold mb-2">Profit by Hour</h3>
        <div style={{ width: "100%", height: 240 }}>
          <ResponsiveContainer>
            <BarChart data={analytics.byHour}>
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey="hour" />
              <YAxis />
              <Tooltip />
              <Bar dataKey="profit" name="Profit" />
            </BarChart>
          </ResponsiveContainer>
        </div>
      </div>

      <div className="bg-white/80 dark:bg-slate-800 p-4 rounded shadow">
        <h3 className="font-semibold mb-2">Win / Loss</h3>
        <div style={{ width: "100%", height: 240 }} className="flex items-center justify-center">
          <div className="text-center">
            <div className="text-3xl font-bold">{analytics.wins} / {analytics.losses}</div>
            <div className="text-sm text-slate-500">Win Rate: {analytics.winRate}%</div>
          </div>
        </div>
      </div>
    </div>

    {/* Trades table */}
    <div className="bg-white/80 dark:bg-slate-800 p-4 rounded shadow mb-6">
      <h3 className="font-semibold mb-3">Trades</h3>
      <div className="overflow-x-auto">
        <table className="w-full text-sm table-auto">
          <thead>
            <tr className="text-left text-slate-500">
              <th className="p-2">Time</th>
              <th className="p-2">Pair</th>
              <th className="p-2">Dir</th>
              <th className="p-2">Amt</th>
              <th className="p-2">Cur</th>
              <th className="p-2">Profit</th>
              <th className="p-2">Tgt</th>
              <th className="p-2">SL</th>
              <th className="p-2">Result</th>
              <th className="p-2">Notes</th>
              <th className="p-2">Actions</th>
            </tr>
          </thead>
          <tbody>
            {trades.map((t) => (
              <tr key={t.id} className="border-t">
                <td className="p-2 align-top">{formatDate(t.timestamp)}</td>
                <td className="p-2 align-top">{t.pair}</td>
                <td className="p-2 align-top">{t.direction}</td>
                <td className="p-2 align-top">{t.amount}</td>
                <td className="p-2 align-top">{t.currency}</td>
                <td className={`p-2 align-top ${t.profit >= 0 ? "text-green-600" : "text-red-600"}`}>{t.profit}</td>
                <td className="p-2 align-top">{t.target}</td>
                <td className="p-2 align-top">{t.stopLoss}</td>
                <td className="p-2 align-top">{t.result}</td>
                <td className="p-2 align-top">{t.notes}</td>
                <td className="p-2 align-top">
                  <div className="flex gap-2">
                    <button className="px-2 py-1 rounded bg-yellow-500 text-white text-xs" onClick={() => editTrade(t.id)}>Edit</button>
                    <button className="px-2 py-1 rounded bg-red-500 text-white text-xs" onClick={() => deleteTrade(t.id)}>Delete</button>
                  </div>
                </td>
              </tr>
            ))}
            {trades.length === 0 && (
              <tr>
                <td className="p-4 text-slate-500" colSpan={11}>No trades yet — add your first trade!</td>
              </tr>
            )}
          </tbody>
        </table>
      </div>
    </div>

    {/* Footer + quick deploy notes */}
    <footer className="text-xs text-slate-500">
      <div className="mb-2">Deployment notes: To publish on <strong>mthtradinganalysis</strong> domain, deploy this app to Vercel/Netlify and configure your domain DNS (you must own the domain). Change app name and meta tags before public launch.</div>
      <div>If you'd like, I can split this into multiple files, add CSV import/export, or integrate cloud storage (Supabase/Firebase) for cross-device sync.</div>
    </footer>
  </div>
</div>

); }

// Full implementation will be added here based on your instructions.
